<!DOCTYPE html>
<html lang="en">
<head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Document</title>
          <link rel="stylesheet" href="styles.css">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>
    <header class="navbar">
        <div class="nav-inner">
            <div class="logo">MyShop</div>
            <nav>
                <a class="nav-link" href="Login/login.html">Login</a>
                <a id="logout_btn" class="nav-link" href="#">LogOut</a>
                <a class="nav-link active" href="./index.html">Shop</a>
                <!-- <i class="fas fa-plus nav-icon" id="create-product-icon" title="Tạo sản phẩm"></i> -->
                <i class="fas fa-shopping-cart nav-icon" id="order-icon" title="Đơn hàng"></i>
                <i class="fas fa-user nav-icon" id="adminPage" title="admin"></i>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h1>Welcome to MyShop</h1>
            <p>Good products just for you.</p>
        </section>

        <section id="product-list" class="products-grid"></section>
    </main>

    <div id="order-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Sản phẩm đã mua</h2>
            <div id="purchased-list"></div>
        </div>
   <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

        // Firebase Configuration
        const firebaseConfig = {
          apiKey: "AIzaSyBOrcd9E7Efk1FYFQ7O2roVyElAMZi1MDM",
          authDomain: "pnl-jsi16.firebaseapp.com",
          projectId: "pnl-jsi16",
          storageBucket: "pnl-jsi16.firebasestorage.app",
          messagingSenderId: "912897970465",
          appId: "1:912897970465:web:0a7a7b66ef57603a922e60"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Load products from Firebase
        async function loadProducts() {
            try {
                let html = '';
                
                
                const productsCollection = collection(db, "products");
                const querySnapshot = await getDocs(productsCollection);
                querySnapshot.forEach((doc) => {
                    const product = doc.data();
                    html += `
                        <article class="product-card">
                            <div class="product-media">
                                <img src="${product.image}" alt="${product.title}">
                            </div>
                            <div class="product-body">
                                <h3 class="product-title">${product.title}</h3>
                                <div class="product-bottom">
                                    <div class="product-price">${product.price} USD</div>
                                    <button class="buy-btn" onclick="selectProduct('${doc.id}')">Mua ngay</button>
                                </div>
                            </div>
                        </article>
                    `;
                });
                
                
                const response = await fetch('https://fakestoreapi.com/products');
                const fakeStoreProducts = await response.json();
                fakeStoreProducts.forEach(product => {
                    html += `
                        <article class="product-card">
                            <div class="product-media">
                                <img src="${product.image}" alt="${product.title}">
                            </div>
                            <div class="product-body">
                                <h3 class="product-title">${product.title}</h3>
                                <div class="product-bottom">
                                    <div class="product-price">${product.price} USD</div>
                                    <button class="buy-btn" onclick="selectProduct(${product.id})">Mua ngay</button>
                                </div>
                            </div>
                        </article>
                    `;
                });
                
                document.getElementById('product-list').innerHTML = html;
            } catch (err) {
                console.error(err);
                document.getElementById('product-list').innerHTML = '<div class="text-danger">Không thể lấy dữ liệu sản phẩm!</div>';
            }
        }

        window.selectProduct = function(id) {
            localStorage.setItem('selectedProduct', JSON.stringify({id}));
            location.href = 'chitiet.html';
        };

        loadProducts();
    </script>
    <script>
        

        document.getElementById('order-icon').addEventListener('click', () => {
            const modal = document.getElementById('order-modal');
            const list = document.getElementById('purchased-list');
            const purchased = JSON.parse(localStorage.getItem('purchasedProducts')) || [];
            list.innerHTML = purchased.map(p => `
                <div class="product-card" style="flex-direction:row; padding:10px;">
                    <img src="${p.image}" alt="${p.title}" style="width:50px; height:50px; margin-right:10px;">
                    <div>
                        <h4 style="margin:0; font-size:14px;">${p.title}</h4>
                        <p style="margin:0; color:var(--accent);">${p.price} USD</p>
                    </div>
                </div>
            `).join('');
            modal.style.display = 'block';
        });



        document.getElementById('adminPage').addEventListener('click', () => {
            location.href = 'admin.html';
        });

        document.querySelector('.close').addEventListener('click', () => {
            document.getElementById('order-modal').style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target == document.getElementById('order-modal')) {
                document.getElementById('order-modal').style.display = 'none';
            }
        });
    </script>
    <script type="module" src="admin.js"></script>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">MyShop</div>
                <p class="footer-description">Your one-stop shop for amazing products. Discover quality items at great prices.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <div class="footer-links">
                    <a href="./index.html">Shop</a>
                    <a href="Login/login.html">Login</a>
                    <a href="createProducts.html">Create Product</a>
                </div>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <div class="footer-social">
                    <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 MyShop. All rights reserved. | Designed with <i class="fas fa-heart" style="color: var(--accent);"></i> by Your Team</p>
        </div>
    </footer>
<script src="./scr/js/addSanpham.js"></script>
<script type="module" src="admin.js"></script>
<script>
    document.getElementById('logout_btn').addEventListener('click', () => {
        // Xóa thông tin đăng nhập khỏi localStorage
        localStorage.removeItem('user_session');
        // Chuyển hướng về trang đăng nhập
        location.href = 'Login/login.html';
    });
    window.addEventListener('load', () => {
        const loggedInUser = localStorage.getItem('user_session');
        if (!loggedInUser) {
            // Nếu chưa đăng nhập, chuyển hướng về trang đăng nhập
            location.href = 'Login/login.html';
        }
    });
</script>
</body>
</html>

